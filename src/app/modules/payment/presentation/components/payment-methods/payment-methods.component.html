<div class="p-6 bg-gray-50 min-h-screen">
    <div class="max-w-7xl mx-auto">
        <!-- Header and Ajouter Button in the same row -->
        <div class="flex items-center justify-between mb-4">
            <div>
                <h1 class="text-2xl font-bold">M√©thodes de paiement automatis√©</h1>
                <p class="text-gray-500 text-sm">
                    G√©rez vos m√©thodes de paiement pour le traitement automatis√©
                </p>
            </div>
            <button mat-flat-button color="primary" (click)="openAddPaymentModal()">
                <mat-icon>add</mat-icon> Ajouter
            </button>
        </div>

        <!-- Tabs for Payment Categories -->
        <mat-tab-group [(selectedIndex)]="selectedTab" class="bg-white shadow-lg rounded-lg">
            <mat-tab label="üí≥ Cartes"></mat-tab>
            <mat-tab label="üì± Mobile"></mat-tab>
            <mat-tab label="üíº Autres"></mat-tab>
        </mat-tab-group>

        <!-- Payment Methods List -->
        <div class="bg-white p-6 shadow rounded-lg mt-4">
            @if (currentMethods.length > 0) {
                <mat-list>
                    @for (method of currentMethods; track method.id) {

                        <mat-list-item class="flex justify-between items-center w-full">
                            <!-- Title and Details -->
                            <div class="flex justify-between items-center w-full">
                                <!-- Left: Name -->
                                <div class="font-medium text-base">{{ method.name }}</div>

                                <!-- Right: Delete Button -->
                                <button mat-icon-button color="warn" (click)="removeMethod(method.id)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>

                            <!-- Details below -->
                            <div class="text-gray-500 text-sm w-full">{{ method.details }}</div>

                            <mat-divider></mat-divider>
                        </mat-list-item>
                    }
                </mat-list>
            } @else {
                <!-- No Payment Methods Message -->
                <div class="text-center text-gray-500 text-sm py-6">
                    <mat-icon class="text-gray-400">credit_card_off</mat-icon>
                    <p>Aucune m√©thode de paiement disponible</p>
                </div>
            }
        </div>

        <!-- Security Notice -->
        <div class="bg-white p-4 shadow rounded-lg mt-4 flex items-center justify-between">
            <div>
                <h2 class="text-lg font-semibold">üîí S√©curit√© renforc√©e</h2>
                <p class="text-gray-500 text-sm">
                    Tous les paiements sont s√©curis√©s avec l'authentification √† deux facteurs et le chiffrement de bout en bout.
                </p>
            </div>
            <span class="px-4 py-2 bg-green-100 text-green-700 font-medium rounded-lg">Activ√©e</span>
        </div>
    </div>
</div>
